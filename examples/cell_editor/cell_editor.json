{
  "context": {
    "caretBoundingBox": null,
    "caretPosition": {
      "end": 0,
      "start": 0
    },
    "editingCell": null,
    "emplaceToken": null,
    "inputValue": "",
    "isManualEmplaceMode": false,
    "liveEvaluationOutput": null
  },
  "id": "cellEditorMachine",
  "initial": "idle",
  "on": {
    "CARET_POSITION_CHANGE": [
      {
        "actions": [
          {
            "type": "updateCaretPosition"
          },
          {
            "type": "updateEmplaceTokenByInputValue"
          }
        ],
        "guard": "hasEditingCell"
      }
    ],
    "EVALUATE_LIVE_FORMULA": [
      {
        "actions": [
          {
            "type": "evaluateLiveFormula"
          }
        ],
        "guard": "hasEditingCell"
      }
    ],
    "INPUT_CHANGE": [
      {
        "actions": [
          {
            "type": "setInputValue"
          }
        ]
      }
    ]
  },
  "states": {
    "editing": {
      "initial": "input",
      "states": {
        "emplace": {
          "entry": {
            "type": "updateEmplaceTokenByInputValue"
          },
          "on": {
            "DISABLE_MANUAL_EMPLACE_MODE": [
              {
                "actions": [
                  {
                    "type": "disableManualEmplaceMode"
                  }
                ],
                "target": "input"
              }
            ],
            "ENABLE_MANUAL_EMPLACE_MODE": [
              {
                "actions": [
                  {
                    "type": "enableManualEmplaceMode"
                  }
                ],
                "target": "input"
              }
            ],
            "INPUT_CHANGE": [
              {
                "actions": [
                  {
                    "type": "setInputValue"
                  }
                ],
                "guard": "shouldExitEmplaceMode",
                "target": "input"
              },
              {
                "actions": [
                  {
                    "type": "setInputValue"
                  }
                ]
              }
            ],
            "SELECTION_CHANGE": [
              {
                "actions": [
                  {
                    "type": "applySelectionToFormula"
                  }
                ]
              }
            ],
            "SET_EMPLACE_TOKEN": [
              {
                "actions": [
                  {
                    "type": "setEmplaceToken"
                  }
                ]
              }
            ],
            "SUBMIT": [
              {
                "actions": [
                  {
                    "type": "submit"
                  }
                ],
                "target": "#cellEditorMachine.idle"
              }
            ]
          }
        },
        "input": {
          "on": {
            "DISABLE_MANUAL_EMPLACE_MODE": [
              {
                "actions": [
                  {
                    "type": "disableManualEmplaceMode"
                  }
                ],
                "target": "input"
              }
            ],
            "ENABLE_MANUAL_EMPLACE_MODE": [
              {
                "actions": [
                  {
                    "type": "enableManualEmplaceMode"
                  }
                ],
                "target": "emplace"
              }
            ],
            "FINISH_EDITING": [
              {
                "actions": [
                  {
                    "type": "finishEditing"
                  }
                ],
                "target": "#cellEditorMachine.idle"
              }
            ],
            "INPUT_CHANGE": [
              {
                "actions": [
                  {
                    "type": "setInputValue"
                  },
                  {
                    "type": "updateEmplaceTokenByInputValue"
                  }
                ],
                "guard": "shouldEnterEmplaceMode",
                "target": "emplace"
              },
              {
                "actions": [
                  {
                    "type": "setInputValue"
                  }
                ]
              }
            ],
            "SET_EMPLACE_TOKEN": [
              {
                "actions": [
                  {
                    "type": "setEmplaceToken"
                  }
                ]
              }
            ],
            "SUBMIT": [
              {
                "actions": [
                  {
                    "type": "submit"
                  }
                ],
                "target": "#cellEditorMachine.idle"
              }
            ]
          }
        }
      }
    },
    "idle": {
      "on": {
        "START_EDITING": [
          {
            "actions": [
              {
                "type": "startEditing"
              },
              {
                "type": "updateEmplaceTokenByInputValue"
              }
            ],
            "target": "editing"
          }
        ]
      }
    }
  }
}
